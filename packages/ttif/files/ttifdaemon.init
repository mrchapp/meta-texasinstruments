#!/bin/sh

. /etc/profile

repeat() {
  while true; do
    $*
  done
}


case $1 in
  'start')
    echo -n "Starting ttifdaemon"
    repeat /usr/bin/ttifdaemon &
    echo "."
  ;;

  'stop')
    echo -n "Stopping ttifdaemon"
    kill `ps | grep $0 | grep -v grep | grep start | cut "-d " -f2`
    kill `ps | grep /usr/bin/ttifdaemon | grep -v grep | cut "-d " -f2`
    echo "."
  ;;

  'restart')
    $0 stop
    $0 start
  ;;

  *)
    echo "Usage: $0 { start | stop | restart }"
  ;;
esac
